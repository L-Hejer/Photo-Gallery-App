{"version":3,"sources":["components/Header.js","actions/errors.js","actions/photos.js","components/UploadForm.js","utils/constants.js","components/HomePage.js","components/Photo.js","components/Gallery.js","components/NotFoundPage.js","router/AppRouter.js","reducers/photos.js","reducers/errors.js","store/store.js","index.js"],"names":["Header","className","to","getErrors","errors","type","loadPhotos","photos","connect","state","dispatch","useState","photo","setPhoto","isSubmitted","setIsSubmitted","errorMsg","setErroMsg","useEffect","Fragment","upload_error","Form","onSubmit","event","preventDefault","a","formData","FormData","append","axios","post","headers","response","data","beginAddPhoto","method","encType","Group","Label","Control","name","onChange","file","target","files","Button","variant","disabled","HomePage","Photo","id","Card","Img","src","alt","isLoading","setIsLoading","get","length","get_error","map","key","_id","NotFoundPage","AppRouter","component","path","exact","Gallary","photosReducer","action","errorsReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","combineReducers","applyMiddleware","thunk","subscribe","console","log","getState","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dbb01337.chunk.js","sourcesContent":["import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst Header = () => (\r\n  <header>\r\n    <h1>Photo Gallery App</h1>\r\n    <div className=\"links\">\r\n      <NavLink to=\"/\" className=\"link\">\r\n        Home\r\n      </NavLink>\r\n      <NavLink to=\"/gallery\" className=\"link\">\r\n        Gallery\r\n      </NavLink>\r\n    </div>\r\n  </header>\r\n);\r\n\r\nexport default Header;","export const getErrors = (errors) => ({\r\n    type: 'GET_ERRORS',\r\n    errors\r\n  });","import axios from 'axios';\r\nimport { BASE_API_URL } from '../utils/constants';\r\nimport { getErrors } from './errors';\r\n\r\nexport const beginAddPhoto = (photo) => {\r\n  return async (dispatch) => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('photo', photo);\r\n      await axios.post(`${BASE_API_URL}/photos`, formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      });\r\n    } catch (error) {\r\n      error.response && dispatch(getErrors(error.response.data));\r\n    }\r\n  };\r\n};\r\n\r\nexport const startLoadPhotos = () => {\r\n  return async (dispatch) => {\r\n    try {\r\n      const photos = await axios.get(`${BASE_API_URL}/photos`);\r\n      dispatch(loadPhotos(photos.data));\r\n    } catch (error) {\r\n      error.response && dispatch(getErrors(error.response.data));\r\n    }\r\n  };\r\n};\r\n\r\nexport const loadPhotos = (photos) => ({\r\n  type: 'LOAD_PHOTOS',\r\n  photos\r\n});","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Form, Button } from 'react-bootstrap';\r\nimport { beginAddPhoto } from '../actions/photos';\r\n\r\nconst UploadForm = ({ errors, dispatch }) => {\r\n  const [photo, setPhoto] = useState(null);\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n  const [errorMsg, setErroMsg] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setErroMsg(errors);\r\n  }, [errors]);\r\n\r\n  useEffect(() => {\r\n    setErroMsg(''); // reset error message on page load\r\n  }, []);\r\n\r\n  const handleOnChange = (event) => {\r\n    const file = event.target.files[0];\r\n    setPhoto(file);\r\n  };\r\n\r\n  const handleFormSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (photo) {\r\n      setErroMsg('');\r\n      dispatch(beginAddPhoto(photo));\r\n      setIsSubmitted(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {errorMsg && errorMsg.upload_error ? (\r\n        <p className=\"errorMsg centered-message\">{errorMsg.upload_error}</p>\r\n      ) : (\r\n        isSubmitted && (\r\n          <p className=\"successMsg centered-message\">\r\n            Photo uploaded successfully.\r\n          </p>\r\n        )\r\n      )}\r\n      <Form\r\n        onSubmit={handleFormSubmit}\r\n        method=\"post\"\r\n        encType=\"multipart/form-data\"\r\n        className=\"upload-form\"\r\n      >\r\n        <Form.Group>\r\n          <Form.Label>Choose photo to upload</Form.Label>\r\n          <Form.Control type=\"file\" name=\"photo\" onChange={handleOnChange} />\r\n        </Form.Group>\r\n        <Button\r\n          variant=\"primary\"\r\n          type=\"submit\"\r\n          className={`${!photo ? 'disabled submit-btn' : 'submit-btn'}`}\r\n          disabled={photo ? false : true}\r\n        >\r\n          Upload\r\n        </Button>\r\n      </Form>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  photos: state.photos || [],\r\n  errors: state.errors || {}\r\n});\r\n\r\nexport default connect(mapStateToProps)(UploadForm);","export const BASE_API_URL = '';","import React from 'react';\r\nimport UploadForm from './UploadForm';\r\n\r\nconst HomePage = () => (\r\n  <div className=\"home-page\">\r\n    <UploadForm />\r\n  </div>\r\n);\r\n\r\nexport default HomePage;","import React from 'react';\r\nimport { Card } from 'react-bootstrap';\r\n\r\nconst Photo = ({ id }) => {\r\n  return (\r\n    <Card className=\"photo\">\r\n      <Card.Img\r\n        variant=\"top\"\r\n        src={`http://localhost:3300/photos/${id}`}\r\n        alt=\"Photo\"\r\n      />\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default Photo;","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { startLoadPhotos } from '../actions/photos';\r\nimport Photo from './Photo';\r\n\r\nconst Gallary = ({ errors, photos, dispatch }) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    dispatch(startLoadPhotos());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (photos.length > 0) {\r\n      setIsLoading(false);\r\n    }\r\n  }, [photos]);\r\n\r\n  return (\r\n    <div className='photos-list'>\r\n      {errors && errors.get_error && (\r\n        <p className='errorMsg centered-message'>{errors.get_error}</p>\r\n      )}\r\n      {isLoading ? (\r\n        <div className='loading-msg centered-message'>Loading...</div>\r\n      ) : (\r\n        photos.map((photo) => <Photo key={photo._id} id={photo._id} />)\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  photos: state.photos || [],\r\n  errors: state.errors || {},\r\n});\r\n\r\nexport default connect(mapStateToProps)(Gallary);\r\n","import React from 'react';\r\n\r\nconst NotFoundPage = () => (\r\n  <div>\r\n    <h3>Page not found</h3>\r\n  </div>\r\n);\r\n\r\nexport default NotFoundPage;","import React from 'react';\r\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\r\nimport Header from '../components/Header';\r\nimport HomePage from '../components/HomePage';\r\nimport Gallary from '../components/Gallery';\r\nimport NotFoundPage from '../components/NotFoundPage';\r\n\r\nconst AppRouter = () => (\r\n  <BrowserRouter>\r\n    <div>\r\n      <Header />\r\n      <div className=\"main-content\">\r\n        <Switch>\r\n          <Route component={HomePage} path=\"/\" exact={true} />\r\n          <Route component={Gallary} path=\"/gallery\" />\r\n          <Route component={NotFoundPage} />\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  </BrowserRouter>\r\n);\r\n\r\nexport default AppRouter;","const photosReducer = (state = [], action) => {\r\n    switch (action.type) {\r\n      case 'LOAD_PHOTOS':\r\n        return action.photos;\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n  \r\n  export default photosReducer;","const errorsReducer = (state = {}, action) => {\r\n    switch (action.type) {\r\n      case 'GET_ERRORS':\r\n        return action.errors;\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n  \r\n  export default errorsReducer;","import { createStore, combineReducers, applyMiddleware, compose } from 'redux';\r\nimport photosReducer from '../reducers/photos';\r\nimport errorsReducer from '../reducers/errors';\r\nimport thunk from 'redux-thunk';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(\r\n  combineReducers({\r\n    photos: photosReducer,\r\n    errors: errorsReducer\r\n  }),\r\n  composeEnhancers(applyMiddleware(thunk))\r\n);\r\n\r\nstore.subscribe(() => {\r\n  console.log(store.getState());\r\n});\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport AppRouter from './router/AppRouter';\r\nimport store from './store/store';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './styles.scss';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <AppRouter />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}